<div class="login-background">
  <div class="login-wrap">
    <mat-card class="login-card">
      <div class="login-header">
        <h1>My Journal</h1>
        <p>Sign in to continue</p>
      </div>

      <form [formGroup]="form" (ngSubmit)="submit()">
        <mat-form-field appearance="outline">
          <mat-label>Username</mat-label>
          <input matInput formControlName="username" autocomplete="username" />
          <mat-hint>{{ usernameHint }}</mat-hint>
          <mat-error *ngIf="username.hasError('required')">Username is required</mat-error>
          <mat-error *ngIf="username.hasError('minlength')">Minimum length is 5</mat-error>
          <mat-error *ngIf="username.hasError('maxlength')">Maximum length is 10</mat-error>
          <mat-error *ngIf="username.hasError('pattern')"
            >Only lowercase letters and numbers allowed</mat-error
          >
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Password</mat-label>
          <input
            matInput
            [type]="hide ? 'password' : 'text'"
            formControlName="password"
            autocomplete="current-password"
          />
          <button
            mat-icon-button
            matSuffix
            type="button"
            (click)="hide = !hide"
            [attr.aria-label]="'Toggle password visibility'"
          >
            <mat-icon>{{ hide ? "visibility" : "visibility_off" }}</mat-icon>
          </button>
          <mat-hint>{{ passwordHint }}</mat-hint>
          <mat-error *ngIf="password.hasError('required')">Password is required</mat-error>
          <mat-error *ngIf="password.hasError('minlength')">Minimum length is 4</mat-error>
          <mat-error *ngIf="password.hasError('maxlength')">Maximum length is 10</mat-error>
          <mat-error *ngIf="password.hasError('pattern')"
            >Must be 1–7 letters, then 2 digits, ending with $</mat-error
          >
        </mat-form-field>

        <button mat-raised-button color="primary" class="full" [disabled]="loading">
          {{ loading ? "Signing in…" : "Sign in" }}
        </button>
      </form>
    </mat-card>
  </div>
</div>
